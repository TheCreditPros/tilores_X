{
  "timestamp": "2025-09-03T08:40:58.013494",
  "test_type": "live_agenta_variant_comprehensive_testing",
  "summary": {
    "total_tests": 18,
    "passed_tests": 16,
    "failed_tests": 2,
    "success_rate": 88.88888888888889,
    "agenta_sources": 0,
    "template_sources": 9
  },
  "test_types": {
    "routing_accuracy": {
      "passed": 5,
      "failed": 1,
      "total": 6
    },
    "data_availability": {
      "passed": 3,
      "failed": 1,
      "total": 4
    },
    "edge_case": {
      "passed": 5,
      "failed": 0,
      "total": 5
    },
    "prompt_quality": {
      "passed": 3,
      "failed": 0,
      "total": 3
    }
  },
  "detailed_results": [
    {
      "test_type": "routing_accuracy",
      "scenario_name": "Credit Score Query",
      "query": "What's the credit score for e.j.price1986@gmail.com?",
      "expected_route": "credit",
      "actual_route": "credit",
      "expected_variant": "credit-analysis-comprehensive-v1",
      "route_correct": true,
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "has_routing_context": true,
      "has_data_availability": true,
      "has_routing_instructions": false,
      "prompt_length": 821,
      "has_specific_instructions": true,
      "success": true,
      "routing_metadata": {
        "query": "What's the credit score for e.j.price1986@gmail.com?",
        "customer_id": "dc93a2cd-de0a-444f-ad47-3003ba998cd3",
        "keywords_detected": [
          "credit"
        ],
        "data_types_requested": [
          "credit"
        ],
        "routing_decision": "credit",
        "fallback_reason": "no_specific_keywords_detected",
        "is_multi_data": false,
        "complexity_score": 1,
        "data_availability": {
          "credit_data": true,
          "phone_data": true,
          "transaction_data": true,
          "card_data": true,
          "ticket_data": true
        }
      }
    },
    {
      "test_type": "routing_accuracy",
      "scenario_name": "Comprehensive Analysis Query",
      "query": "Give me comprehensive analysis for e.j.price1986@gmail.com including all available data",
      "expected_route": "multi_data",
      "actual_route": "multi_data",
      "expected_variant": "multi-data-analysis-v1",
      "route_correct": true,
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "has_routing_context": true,
      "has_data_availability": true,
      "has_routing_instructions": false,
      "prompt_length": 947,
      "has_specific_instructions": true,
      "success": true,
      "routing_metadata": {
        "query": "Give me comprehensive analysis for e.j.price1986@gmail.com including all available data",
        "customer_id": "dc93a2cd-de0a-444f-ad47-3003ba998cd3",
        "keywords_detected": [
          "combined"
        ],
        "data_types_requested": [],
        "routing_decision": "multi_data",
        "fallback_reason": null,
        "is_multi_data": true,
        "complexity_score": 3,
        "data_availability": {
          "credit_data": true,
          "phone_data": true,
          "transaction_data": true,
          "card_data": true,
          "ticket_data": true
        }
      }
    },
    {
      "test_type": "routing_accuracy",
      "scenario_name": "Account Status Query",
      "query": "What's the current account status for john.doe@email.com?",
      "expected_route": "account_status",
      "actual_route": "account_status",
      "expected_variant": "account-status-v1",
      "route_correct": true,
      "is_agenta_source": false,
      "prompt_source": "fallback_template_routing_aware",
      "has_routing_context": true,
      "has_data_availability": true,
      "has_routing_instructions": false,
      "prompt_length": 1085,
      "has_specific_instructions": true,
      "success": true,
      "routing_metadata": {
        "query": "What's the current account status for john.doe@email.com?",
        "customer_id": "test-customer-123",
        "keywords_detected": [
          "account_status"
        ],
        "data_types_requested": [],
        "routing_decision": "account_status",
        "fallback_reason": null,
        "is_multi_data": false,
        "complexity_score": 1,
        "data_availability": {
          "credit_data": true,
          "phone_data": true,
          "transaction_data": true,
          "card_data": true,
          "ticket_data": true
        }
      }
    },
    {
      "test_type": "routing_accuracy",
      "scenario_name": "Transaction Analysis Query",
      "query": "Show me payment patterns and transaction history for customer@email.com",
      "expected_route": "transaction",
      "actual_route": "transaction",
      "expected_variant": "transaction-analysis-v1",
      "route_correct": true,
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "has_routing_context": true,
      "has_data_availability": true,
      "has_routing_instructions": false,
      "prompt_length": 668,
      "has_specific_instructions": true,
      "success": true,
      "routing_metadata": {
        "query": "Show me payment patterns and transaction history for customer@email.com",
        "customer_id": "test-customer-456",
        "keywords_detected": [
          "transaction"
        ],
        "data_types_requested": [
          "transaction"
        ],
        "routing_decision": "transaction",
        "fallback_reason": null,
        "is_multi_data": false,
        "complexity_score": 1,
        "data_availability": {
          "credit_data": true,
          "phone_data": true,
          "transaction_data": true,
          "card_data": true,
          "ticket_data": true
        }
      }
    },
    {
      "test_type": "routing_accuracy",
      "scenario_name": "Phone Call Analysis Query",
      "query": "Analyze call history and agent interactions for customer@email.com",
      "expected_route": "phone",
      "actual_route": "multi_data",
      "expected_variant": "phone-call-analysis-v1",
      "route_correct": false,
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "has_routing_context": true,
      "has_data_availability": true,
      "has_routing_instructions": false,
      "prompt_length": 954,
      "has_specific_instructions": true,
      "success": false,
      "routing_metadata": {
        "query": "Analyze call history and agent interactions for customer@email.com",
        "customer_id": "test-customer-789",
        "keywords_detected": [
          "phone",
          "combined"
        ],
        "data_types_requested": [
          "phone"
        ],
        "routing_decision": "multi_data",
        "fallback_reason": null,
        "is_multi_data": true,
        "complexity_score": 4,
        "data_availability": {
          "credit_data": true,
          "phone_data": true,
          "transaction_data": true,
          "card_data": true,
          "ticket_data": true
        }
      }
    },
    {
      "test_type": "routing_accuracy",
      "scenario_name": "Mixed Keywords Query",
      "query": "Show me credit score and transaction data for e.j.price1986@gmail.com",
      "expected_route": "multi_data",
      "actual_route": "multi_data",
      "expected_variant": "multi-data-analysis-v1",
      "route_correct": true,
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "has_routing_context": true,
      "has_data_availability": true,
      "has_routing_instructions": false,
      "prompt_length": 958,
      "has_specific_instructions": true,
      "success": true,
      "routing_metadata": {
        "query": "Show me credit score and transaction data for e.j.price1986@gmail.com",
        "customer_id": "dc93a2cd-de0a-444f-ad47-3003ba998cd3",
        "keywords_detected": [
          "credit",
          "transaction"
        ],
        "data_types_requested": [
          "credit",
          "transaction"
        ],
        "routing_decision": "multi_data",
        "fallback_reason": null,
        "is_multi_data": true,
        "complexity_score": 4,
        "data_availability": {
          "credit_data": true,
          "phone_data": true,
          "transaction_data": true,
          "card_data": true,
          "ticket_data": true
        }
      }
    },
    {
      "test_type": "data_availability",
      "scenario_name": "All Data Available",
      "query": "Give me comprehensive analysis for e.j.price1986@gmail.com",
      "data_availability": {
        "credit_data": true,
        "phone_data": true,
        "transaction_data": true,
        "card_data": true,
        "ticket_data": true
      },
      "expected_available": 5,
      "actual_available": 5,
      "expected_unavailable": 0,
      "actual_unavailable": 0,
      "has_data_availability": true,
      "availability_accurate": true,
      "mentions_unavailable": true,
      "available_types": [
        "credit_data",
        "phone_data",
        "transaction_data",
        "card_data",
        "ticket_data"
      ],
      "unavailable_types": [],
      "success": true
    },
    {
      "test_type": "data_availability",
      "scenario_name": "Phone Data Unavailable",
      "query": "Show me call history for customer@email.com",
      "data_availability": {
        "credit_data": true,
        "phone_data": false,
        "transaction_data": true,
        "card_data": true,
        "ticket_data": true
      },
      "expected_available": 4,
      "actual_available": 4,
      "expected_unavailable": 1,
      "actual_unavailable": 1,
      "has_data_availability": true,
      "availability_accurate": true,
      "mentions_unavailable": true,
      "available_types": [
        "credit_data",
        "transaction_data",
        "card_data",
        "ticket_data"
      ],
      "unavailable_types": [
        "phone_data"
      ],
      "success": true
    },
    {
      "test_type": "data_availability",
      "scenario_name": "Limited Data Available",
      "query": "Analyze customer data for customer@email.com",
      "data_availability": {
        "credit_data": true,
        "phone_data": false,
        "transaction_data": false,
        "card_data": false,
        "ticket_data": false
      },
      "expected_available": 1,
      "actual_available": 1,
      "expected_unavailable": 4,
      "actual_unavailable": 4,
      "has_data_availability": true,
      "availability_accurate": true,
      "mentions_unavailable": true,
      "available_types": [
        "credit_data"
      ],
      "unavailable_types": [
        "phone_data",
        "transaction_data",
        "card_data",
        "ticket_data"
      ],
      "success": true
    },
    {
      "test_type": "data_availability",
      "scenario_name": "No Data Available",
      "query": "What can you tell me about customer@email.com?",
      "data_availability": {
        "credit_data": false,
        "phone_data": false,
        "transaction_data": false,
        "card_data": false,
        "ticket_data": false
      },
      "expected_available": 0,
      "actual_available": 0,
      "expected_unavailable": 5,
      "actual_unavailable": 5,
      "has_data_availability": false,
      "availability_accurate": true,
      "mentions_unavailable": true,
      "available_types": [],
      "unavailable_types": [
        "credit_data",
        "phone_data",
        "transaction_data",
        "card_data",
        "ticket_data"
      ],
      "success": false
    },
    {
      "test_type": "edge_case",
      "case_name": "Empty Query",
      "query": "",
      "customer_id": "test-customer-id",
      "handled_gracefully": true,
      "has_system_prompt": true,
      "has_routing_metadata": true,
      "has_routing_decision": true,
      "routing_decision": "credit",
      "success": true
    },
    {
      "test_type": "edge_case",
      "case_name": "Very Long Query",
      "query": "What is the comprehensive credit analysis including all bureau data, transaction history, payment pa...",
      "customer_id": "test-customer-id",
      "handled_gracefully": true,
      "has_system_prompt": true,
      "has_routing_metadata": true,
      "has_routing_decision": true,
      "routing_decision": "multi_data",
      "success": true
    },
    {
      "test_type": "edge_case",
      "case_name": "Special Characters Query",
      "query": "What's the credit score for user@domain.com with special chars: !@#$%^&*()?",
      "customer_id": "test-customer-id",
      "handled_gracefully": true,
      "has_system_prompt": true,
      "has_routing_metadata": true,
      "has_routing_decision": true,
      "routing_decision": "credit",
      "success": true
    },
    {
      "test_type": "edge_case",
      "case_name": "No Customer ID",
      "query": "What's the credit score?",
      "customer_id": null,
      "handled_gracefully": true,
      "has_system_prompt": true,
      "has_routing_metadata": true,
      "has_routing_decision": true,
      "routing_decision": "credit",
      "success": true
    },
    {
      "test_type": "edge_case",
      "case_name": "Unicode Query",
      "query": "\u00bfCu\u00e1l es el puntaje crediticio para cliente@email.com?",
      "customer_id": "test-customer-id",
      "handled_gracefully": true,
      "has_system_prompt": true,
      "has_routing_metadata": true,
      "has_routing_decision": true,
      "routing_decision": "credit",
      "success": true
    },
    {
      "test_type": "prompt_quality",
      "test_name": "Credit Analysis Prompt Quality",
      "query": "Analyze credit data for e.j.price1986@gmail.com",
      "expected_route": "credit",
      "actual_route": "credit",
      "route_correct": true,
      "quality_score": 75.0,
      "quality_indicators": [
        "credit analysis",
        "bureau",
        "score",
        "routing context instructions"
      ],
      "quality_results": {
        "credit analysis": true,
        "bureau": true,
        "score": true,
        "routing context instructions": false
      },
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "prompt_length": 722,
      "success": true
    },
    {
      "test_type": "prompt_quality",
      "test_name": "Multi-Data Prompt Quality",
      "query": "Give me comprehensive analysis for customer@email.com",
      "expected_route": "multi_data",
      "actual_route": "multi_data",
      "route_correct": true,
      "quality_score": 75.0,
      "quality_indicators": [
        "multiple sources",
        "comprehensive",
        "combine",
        "routing context instructions"
      ],
      "quality_results": {
        "multiple sources": true,
        "comprehensive": true,
        "combine": true,
        "routing context instructions": false
      },
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "prompt_length": 848,
      "success": true
    },
    {
      "test_type": "prompt_quality",
      "test_name": "Transaction Prompt Quality",
      "query": "Show me payment patterns for customer@email.com",
      "expected_route": "transaction",
      "actual_route": "transaction",
      "route_correct": true,
      "quality_score": 75.0,
      "quality_indicators": [
        "transaction",
        "payment",
        "billing",
        "routing context instructions"
      ],
      "quality_results": {
        "transaction": true,
        "payment": true,
        "billing": true,
        "routing context instructions": false
      },
      "is_agenta_source": false,
      "prompt_source": "template_mapped_routing_aware",
      "prompt_length": 569,
      "success": true
    }
  ]
}